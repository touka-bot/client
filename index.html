<!DOCTYPE html>
<html>

<head>
    <title>FLUID v2</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <input type="text" class="search-input" id="center" placeholder="Search a Show">
    <button id="center" class="search-button" onclick="searchTitle('noragami')">Search</button>
</body>

<script>
    function searchTitle(title) {
        console.log('started');
        var show = document.getElementsByClassName('search-input')[0].value;
        if (show == "")
            return alert('Please enter a Show');

        // const url = "https://4anime.to/?s=" + show.toLowerCase().replace(" ", "+");

        const Http = new XMLHttpRequest();
        const url = 'http://4c3711.xyz:3000/fluid/api/v1/search/' + show.toLowerCase().replace(" ", "+");
        Http.open("GET", url);
        Http.send();

        Http.onreadystatechange = (e) => {
            const response = Http.responseText;
            makeList(response);
            
        }
        console.log('ended');
    }

    function makeList(listData) {
    // Make a container element for the list
    listContainer = document.createElement('div'),
    // Make the list
    listElement = document.createElement('ul'),
    // Set up a loop that goes through the items in listItems one at a time
    numberOfListItems = listData.length,
    listItem,
    i;

    // Add it to the page
    document.getElementsByTagName('body')[0].appendChild(listContainer);
    listContainer.appendChild(listElement);

    for (i = 0; i < numberOfListItems; ++i) {
        // create an item for each one
        listItem = document.createElement('li');

        // Add the item text
        listItem.innerHTML = listData[i];

        // Add listItem to the listElement
        listElement.appendChild(listItem);
    }
}
</script>

</html>
